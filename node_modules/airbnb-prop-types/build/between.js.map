{"version":3,"sources":["../src/between.js"],"names":["betweenValidator","number","props","propName","componentName","value","isNaN","TypeError","numberOrPropsFunc","lowerCompare","gt","gte","upperCompare","lt","lte","greaterThanError","lessThanError","errorMessage","opts","errors","filter","Boolean","join","propsThunkify","reduce","acc","key","numberThunk","invokeWithProps","optsThunks","thunk","argValidators","isRequired","argValidator","every","validator","thunkValueValidator","options","argError","between","propValue","RangeError","rest","thunkValuesError","betweenRequired"],"mappings":"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","file":"between.js","sourcesContent":["import entries from 'object.entries';\n\nimport shape from './shape';\nimport valuesOf from './valuesOf';\nimport wrapValidator from './helpers/wrapValidator';\n\nfunction number(props, propName, componentName) {\n  const value = props[propName];\n  if (typeof value === 'number' && !isNaN(value)) {\n    return null;\n  }\n\n  return new TypeError(`${componentName}: ${propName} must be a non-NaN number.`);\n}\n\nfunction numberOrPropsFunc(props, propName) {\n  const value = props[propName];\n\n  if (typeof value === 'function') {\n    return null;\n  }\n\n  if (typeof value === 'number' && !isNaN(value)) {\n    return null;\n  }\n\n  return new TypeError(`${propName}: a function, or a non-NaN number is required`);\n}\n\nfunction lowerCompare(value, { gt, gte }) {\n  if (typeof gt === 'number') {\n    return value > gt;\n  }\n  if (typeof gte === 'number') {\n    return value >= gte;\n  }\n  return true;\n}\n\nfunction upperCompare(value, { lt, lte }) {\n  if (typeof lt === 'number') {\n    return value < lt;\n  }\n  if (typeof lte === 'number') {\n    return value <= lte;\n  }\n  return true;\n}\n\nfunction greaterThanError({ gt, gte }) {\n  if (typeof gt === 'number') {\n    return `greater than ${gt}`;\n  }\n  if (typeof gte === 'number') {\n    return `greater than or equal to ${gte}`;\n  }\n  return '';\n}\n\nfunction lessThanError({ lt, lte }) {\n  if (typeof lt === 'number') {\n    return `less than ${lt}`;\n  }\n  if (typeof lte === 'number') {\n    return `less than or equal to ${lte}`;\n  }\n  return '';\n}\n\nfunction errorMessage(componentName, propName, opts) {\n  const errors = [greaterThanError(opts), lessThanError(opts)].filter(Boolean).join(' and ');\n  return `${componentName}: ${propName} must be ${errors}`;\n}\n\nfunction propsThunkify(opts) {\n  return entries(opts).reduce((acc, [key, value]) => {\n    const numberThunk = typeof value === 'number' ? () => value : value;\n    return { ...acc, [key]: numberThunk };\n  }, {});\n}\n\nfunction invokeWithProps(optsThunks, props) {\n  return entries(optsThunks).reduce((acc, [key, thunk]) => {\n    const value = thunk(props);\n    return { ...acc, [key]: value };\n  }, {});\n}\n\nconst argValidators = [\n  shape({ lt: numberOrPropsFunc, gt: numberOrPropsFunc }).isRequired,\n  shape({ lte: numberOrPropsFunc, gt: numberOrPropsFunc }).isRequired,\n  shape({ lt: numberOrPropsFunc, gte: numberOrPropsFunc }).isRequired,\n  shape({ lte: numberOrPropsFunc, gte: numberOrPropsFunc }).isRequired,\n  shape({ lt: numberOrPropsFunc }).isRequired,\n  shape({ lte: numberOrPropsFunc }).isRequired,\n  shape({ gt: numberOrPropsFunc }).isRequired,\n  shape({ gte: numberOrPropsFunc }).isRequired,\n];\nfunction argValidator(props, propName) {\n  return argValidators.every(validator => !!validator(props, propName));\n}\n\nconst thunkValueValidator = valuesOf(number).isRequired;\n\nexport default function betweenValidator(options) {\n  const argError = argValidator({ options }, 'options');\n  if (argError) {\n    throw new TypeError('between: only one of the pairs of `lt`/`lte`, and `gt`/`gte`, may be supplied, and at least one pair must be provided.');\n  }\n\n  const optsThunks = propsThunkify(options);\n\n  const validator = function between(props, propName, componentName, ...rest) {\n    const propValue = props[propName];\n    if (propValue == null) {\n      return null;\n    }\n\n    if (typeof propValue !== 'number') {\n      return new RangeError(`${componentName}: ${propName} must be a number, got \"${typeof propValue}\"`);\n    }\n\n    const opts = invokeWithProps(optsThunks, props);\n    const thunkValuesError = thunkValueValidator(\n      { [propName]: opts },\n      propName,\n      componentName,\n      ...rest,\n    );\n    if (thunkValuesError) {\n      return thunkValuesError;\n    }\n\n    if (!lowerCompare(propValue, opts) || !upperCompare(propValue, opts)) {\n      return new RangeError(errorMessage(componentName, propName, opts));\n    }\n\n    return null;\n  };\n  validator.isRequired = function betweenRequired(props, propName, componentName, ...rest) {\n    const propValue = props[propName];\n    if (typeof propValue !== 'number') {\n      return new RangeError(`${componentName}: ${propName} must be a number, got \"${typeof propValue}\"`);\n    }\n\n    const opts = invokeWithProps(optsThunks, props);\n    const thunkValuesError = thunkValueValidator(\n      { [propName]: opts },\n      propName,\n      componentName,\n      ...rest,\n    );\n    if (thunkValuesError) {\n      return thunkValuesError;\n    }\n\n    if (!lowerCompare(propValue, opts) || !upperCompare(propValue, opts)) {\n      return new RangeError(errorMessage(componentName, propName, opts));\n    }\n\n    return null;\n  };\n\n  return wrapValidator(validator, 'between', options);\n}\n"]}